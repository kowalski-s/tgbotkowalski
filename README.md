# Telegram Bot для лид-генерации

Telegram бот для привлечения подписчиков на канал с выдачей бонусных материалов и двусторонней связью.

## Возможности

- ✅ Проверка подписки на канал
- ✅ Автоматическая выдача ссылки и PDF файла
- ✅ Двусторонняя связь администратор-пользователь
- ✅ Статистика по пользователям
- ✅ Легкий деплой через Docker

## Быстрый старт

### 1. Подготовка

Создайте бота через [@BotFather](https://t.me/BotFather):
```
/newbot
```

Получите свой User ID через [@userinfobot](https://t.me/userinfobot)

### 2. Установка

```bash
# Клонируйте репозиторий
git clone <your-repo-url>
cd tgbotkowalski

# Создайте виртуальное окружение
python -m venv venv

# Активируйте его
# Windows:
venv\Scripts\activate
# Linux/Mac:
source venv/bin/activate

# Установите зависимости
pip install -r requirements.txt
```

### 3. Настройка

Скопируйте файл `.env.example` в `.env`:
```bash
# Windows:
copy .env.example .env
# Linux/Mac:
cp .env.example .env
```

Отредактируйте `.env` и укажите:
- `BOT_TOKEN` - токен от BotFather
- `ADMIN_ID` - ваш Telegram ID
- `CHANNEL_ID` - ID или @username вашего канала
- `CHANNEL_LINK` - ссылка на канал
- `ARTICLE_LINK` - ссылка на статью
- Остальные параметры по желанию

**ВАЖНО:** Добавьте бота в качестве администратора канала с правом "Просмотр сообщений"!

### 4. Подготовка файлов

Создайте папку `data` и поместите туда PDF файл:
```bash
mkdir data
# Скопируйте ваш bonus.pdf в папку data/
```

### 5. Запуск

```bash
python -m bot.main
```

## Деплой на VPS (cloud.ru + dokploy)

### Вариант 1: Docker Compose (рекомендуется)

```bash
# На сервере
git clone <your-repo-url>
cd tgbotkowalski

# Создайте .env файл с вашими настройками
nano .env

# Запустите
docker-compose up -d

# Проверьте логи
docker-compose logs -f
```

### Вариант 2: Через dokploy

1. Создайте приложение в dokploy
2. Подключите Git репозиторий
3. Добавьте переменные окружения в интерфейсе dokploy
4. Запустите деплой

## Команды бота

### Для пользователей:
- `/start` - запуск бота и проверка подписки

### Для администратора:
- `/stats` - статистика по пользователям
- Ответ на сообщение пользователя: просто ответьте (reply) на его сообщение в боте

## Структура проекта

```
tgbotkowalski/
├── bot/                    # Код бота
│   ├── handlers/          # Обработчики команд
│   ├── keyboards/         # Клавиатуры
│   ├── database/          # Работа с БД
│   └── utils/             # Утилиты
├── data/                  # Файлы и БД
│   ├── bonus.pdf         # PDF для отправки
│   └── bot.db            # SQLite база (создается автоматически)
├── .env                   # Настройки (НЕ в git!)
├── requirements.txt       # Зависимости
└── README.md             # Этот файл
```

## Поддержка

Подробная документация в [claude.md](claude.md)

## Безопасность

- ⚠️ Никогда не загружайте `.env` файл в git!
- ⚠️ Храните `BOT_TOKEN` в секрете
- ✅ `.gitignore` настроен для защиты секретов

## Системные требования

Минимальные:
- Python 3.11+
- 100 МБ RAM
- 50 МБ диска

Рекомендуемые (для VPS):
- 2 vCPU
- 4 ГБ RAM
- 30 ГБ диска

## Лицензия

MIT
